**Вариант 16**

Дана целочисленная прямоугольная матрица. Определить:

1) количество отрицательных элементов в тех строках, которые содержат хотя бы один нулевой элемент, вывести номер каждой строки и количество отрицательных элементов в ней;

2) номера строк и столбцов всех седловых точек матрицы;

3) поменять местами строку и столбец , находящиеся на пересечении минимальной седловой точки, если точка находится на главной диагонали.

**ПРИМЕЧАНИЕ**

Матрица _А_ имеет седловую точку Aij, если Aij является минимальным элементом в i-й строке и максимальным в _j-м_ столбце.

##### Инициализация многомерных массивов

Значения элементов многомерного массива, как и в одномерном случае, могут быть заданы константными значениями при объявлении, заключенными в фигурные скобки {}. Однако в этом случае указание количества элементов в строках и столбцах должно быть обязательно указано в квадратных скобках [ ].

Пример
``` C
#include <stdio.h>  
int main () {

  int a[2][3]={1, 2, 3, 4, 5, 6};

  printf ("%d %d %d\n", a[0][0], a[0][1], a[0][2]);

  printf ("%d %d %d\n", a[1][0], a[1][1], a[1][2]);

  return 0;  
}
```
Результат выполнения  
![](file:///C:/Users/ron4i/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)  
  

При работе с массива часто используется параметрический цикл, тот же результат выполнения программы будет достигнут следующим программным кодом:

  for (i=0; i<2; i++)  // цикл по строкам
``` C
   {

    for (j=0; j<3; j++) // цикл по столбцам

      printf ("%d ",a[ i][j]);

    printf (“\n”);

  }

```

Массив **а[2][3]** можно инициализировать, явно выделяя строки массива:

  int a[2][3]={{1, 2, 3}, {4, 5, 6}};

Можно инициализировать не все элементы массива, в нижеследующем инициализируются только элементы первого столбца:

 int a[2][3]={{1}, {4}};

Следующее описание формирует «треугольное» заполнение матрицы в целочисленном массиве из 5 строк и 4 столбцов:

int x[5][4]={{1}, {2, 3},{4, 5, 6},{7,8,9,10}};

|   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Строка|0|   |   |   |1|   |   |   |2|   |   |   |3|   |   |   |4|   |   |   |
|Столбец|0|1|2|3|0|1|2|3|0|1|2|3|0|1|2|3|0|1|2|3|
|Значение|1||||2|3|||4|5|6||7|8|9|10|||||

  

Однако чаще требуется вводить значения элементов многомерного массива в процессе выполнения программы. С этой целью удобно использовать вложенный [параметрический цикл](http://prog-cpp.ru/c-cycles/#for "Параметрический цикл").

Пример

``` C
#include <stdio.h>  
int main() {

  int a[2][3]; // массив из 2 строк и 3 столбцов

  int i, j;

  // Ввод элементов массива

  for(i=0; i<2; i++)  // цикл по строкам

   {

    for(j=0; j<3; j++) // цикл по столбцам

     {

       printf("a[%d][%d] = ", i,j);

       scanf("%d", &a[i][j]);

    }

  }

```

  // Вывод элементов массива

``` C
  for(i=0; i<2; i++)  // цикл по строкам

  {

     for(j=0; j<3; j++) // цикл по столбцам

       {

         printf("%d ", a[i][j]);

       }

     printf("\n"); // перевод на новую строку

   }

  return 0;  
}
```


Результат выполнения  
![](file:///C:/Users/ron4i/AppData/Local/Temp/msohtmlclip1/01/clip_image004.jpg)


**ВЫПОЛНЕНО** 

``` C 
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>

 
// Функция для поиска отрицательных элементов в строках с нулями

void countNegativesInZeroRows(int rows, int cols, int matrix[rows][cols])
{
    for (int i = 0; i < rows; i++)
    {
        int hasZero = 0;
        int negCount = 0;
        for (int j = 0; j < cols; j++)
        {
            if (matrix[i][j] == 0)
            {
               hasZero = 1;
            }
            if (matrix[i][j] < 0)
            {
               negCount++;
            }
        }
        if (hasZero)
        {
            printf("Row %d: %d negative elements\n", i + 1, negCount);
        }
    }
}
// Функция для поиска седловых точек

void findSaddlePoints(int rows, int cols, int matrix[rows][cols])
{
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < cols; j++)
        {
           int isMinRow = 1;
            int isMaxCol = 1;
            // Check if minimum in row
            for (int k = 0; k < cols; k++)
            {
                if (matrix[i][k] < matrix[i][j])
                {
                    isMinRow = 0;
                    break;
                }

            }

            // Проверьте, есть ли максимум в столбце
            for (int k = 0; k < rows; k++)
            {
                if (matrix[k][j] > matrix[i][j])
                {
                    isMaxCol = 0;
                    break;
                }
            }
            if (isMinRow && isMaxCol)
            {
                printf("Saddle point at (%d, %d): %d\n", i + 1, j + 1, matrix[i][j]);

            }
        }

    }

}
// Функция для замены строки и столбца (если они на главной диагонали)
void swapRowCol(int rows, int cols, int matrix[rows][cols], int row, int col)
{
    if (row == col)
    {
        for (int i = 0; i < cols; i++)
        {
            int temp = matrix[row][i];
            matrix[row][i] = matrix[i][col];
            matrix[i][col] = temp;
        }
    }
}

int main()
{
    int rows, cols;
    printf("Enter the number of rows and columns: ");
    if (scanf("%d %d", &rows, &cols) != 2)
    {
        fprintf(stderr, "Invalid input. Please enter integers.\n");
        return 1;
    }
    int matrix[rows][cols];
    printf("Enter the matrix elements:\n");
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < cols; j++)
        {
            if (scanf("%d", &matrix[i][j]) != 1)
            {
                fprintf(stderr, "Invalid input. Please enter integers.\n");
                return 1;
            }
        }
    }
    // Part 1
    printf("Negative elements in rows with zeros:\n");
    countNegativesInZeroRows(rows, cols, matrix);
    // Part 2
    
    printf("\nSaddle points:\n");
    findSaddlePoints(rows, cols, matrix);
    // Part 3 - Поиск и замена (требуется улучшение для нескольких седловых точек)
    
    int minSaddleRow = -1, minSaddleCol = -1, minSaddleVal = INT_MAX;
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < cols; j++)
        {
            int isMinRow = 1;
            int isMaxCol = 1;
            for (int k = 0; k < cols; k++)
            {
                if (matrix[i][k] < matrix[i][j])
                    isMinRow = 0;
            }
            for (int k = 0; k < rows; k++)
            {
                if (matrix[k][j] > matrix[i][j])
                    isMaxCol = 0;
            }
            if (isMinRow && isMaxCol && matrix[i][j] < minSaddleVal)
            {
                minSaddleVal = matrix[i][j];
                minSaddleRow = i;
                minSaddleCol = j;
            }
        }
    }

    if (minSaddleRow != -1)
    {
        printf("\nSwapping row and column for minimal saddle point...\n");
        swapRowCol(rows, cols, matrix, minSaddleRow, minSaddleCol);
        printf("Matrix after swap:\n");
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                printf("%d ", matrix[i][j]);
            }
            printf("\n");
        }
    }
    else
    {
        printf("\nNo saddle point found.\n");
    }
    return 0;

}
```

Давайте разберем код на C по строкам и узнаем, что делает каждая из них.

```
#include <stdio.h>
```

- Подключает стандартную библиотеку ввода-вывода, что позволяет использовать функции, такие как `printf` и `scanf`.


```
#include <stdlib.h>
```

- Подключает библиотеку для работы с функциями, такими как `malloc`, `free`, `rand`, `srand`, и т. д.


```
#include <limits.h>
```

- Подключает библиотеку, которая содержит определения для вычисления пределов целочисленных типов, таких как `INT_MAX` для определения максимального значения типа `int`.


```
// Функция для поиска отрицательных элементов в строках с нулями
void countNegativesInZeroRows(int rows, int cols, int matrix[rows][cols])
```

- Объявляет функцию `countNegativesInZeroRows`, которая принимает размеры матрицы (количество строк и столбцов) и саму матрицу.


```
{
    for (int i = 0; i < rows; i++)
```

- Начинает цикл по строкам матрицы.



```
    {
        int hasZero = 0;
        int negCount = 0;
```

- Инициализирует переменные `hasZero`, чтобы отслеживать наличие нуля в текущей строке, и `negCount`, чтобы считать количество отрицательных чисел.

```
        for (int j = 0; j < cols; j++)
```

- Начинает цикл по столбцам текущей строки.



```
        {
            if (matrix[i][j] == 0)
```

- Проверяет, является ли текущий элемент нулем.


```
            {
                hasZero = 1;
            }
```

- Если элемент равен нулю, устанавливает `hasZero` в 1 (истина).



```
            if (matrix[i][j] < 0)
```

- Проверяет, является ли текущий элемент отрицательным.



```
            {
                negCount++;
            }
```

- Увеличивает счетчик `negCount`, если элемент отрицательный.


```
        }
```

- Закрывает цикл по столбцам.


```
        if (hasZero)
```

- Проверяет, была ли найдена строка с нулями.



```
        {
            printf("Row %d: %d negative elements\n", i + 1, negCount);
        }
```

- Если в строке есть ноль, выводит номер строки и количество отрицательных элементов.



```
    }
}
```

- Закрывает цикл по строкам и тело функции.



```
// Функция для поиска седловых точек
void findSaddlePoints(int rows, int cols, int matrix[rows][cols])
```

- Объявляет функцию `findSaddlePoints`, которая находит седловые точки в матрице.



```
{
    for (int i = 0; i < rows; i++)
```

- Начинает цикл по строкам матрицы.



```
    {
        for (int j = 0; j < cols; j++)
```

- Начинает цикл по столбцам текущей строки.


```
        {
            int isMinRow = 1;
            int isMaxCol = 1;
```

- Инициализирует флаги `isMinRow` и `isMaxCol`, которые указывают, является ли текущий элемент минимальным в строке и максимальным в столбце соответственно.



```
            // Check if minimum in row
            for (int k = 0; k < cols; k++)
```

- Начинает цикл для проверки, является ли элемент минимальным в текущей строке.



```
            {
                if (matrix[i][k] < matrix[i][j])
```

- Проверяет, меньше ли текущий элемент в строке элемента `matrix[i][j]`.


```
                {
                    isMinRow = 0;
                    break;
                }
```

- Если найден элемент, меньший текущего, устанавливает `isMinRow` в 0 и выходит из цикла.


```
            }
```

- Закрывает цикл проверки минимального значения в строке.



```
            // Проверьте, есть ли максимум в столбце
            for (int k = 0; k < rows; k++)
```

- Начинает цикл для проверки, является ли элемент максимальным в текущем столбце.



```
            {
                if (matrix[k][j] > matrix[i][j])
```

- Проверяет, больше ли текущий элемент в столбце элемента `matrix[i][j]`.


```
                {
                    isMaxCol = 0;
                    break;
                }
```

- Если найден элемент, больший текущего, устанавливает `isMaxCol` в 0 и выходит из цикла.


```
            }
```

- Закрывает цикл проверки максимального значения в столбце.


```
            if (isMinRow && isMaxCol)
```

- Проверяет, является ли текущий элемент седловой точкой.



```
            {
                printf("Saddle point at (%d, %d): %d\n", i + 1, j + 1, matrix[i][j]);
            }
```

- Если это седловая точка, выводит его координаты и значение.



```
        }
    }
}
```

- Закрывает вложенные циклы и тело функции `findSaddlePoints`.



```
// Функция для замены строки и столбца (если они на главной диагонали)
void swapRowCol(int rows, int cols, int matrix[rows][cols], int row, int col)
```

- Объявляет функцию `swapRowCol`, которая меняет местами строку и столбец, если они находятся на главной диагонали.



```
{
    if (row == col)
```

- Проверяет, равны ли индексы строки и столбца.



```
    {
        for (int i = 0; i < cols; i++)
```

- Начинает цикл для замены элементов строки и столбца.



```
        {
            int temp = matrix[row][i];
            matrix[row][i] = matrix[i][col];
            matrix[i][col] = temp;
        }
```

- Меняет местами элементы в строке и столбце.


```
    }
}
```

- Закрывает условия и тело функции.


```
int main()
```

- Начинает основную функцию программы.



```
{
    int rows, cols;
```

- Объявляет целочисленные переменные `rows` и `cols`, которые будут хранить количество строк и столбцов в матрице.


```
    printf("Enter the number of rows and columns: ");
```

- Запрашивает у пользователя ввод количества строк и столбцов.


```
    if (scanf("%d %d", &rows, &cols) != 2)
```

- Считывает количество строк и столбцов, проверяя, были ли введены два целых числа.


```
    {
        fprintf(stderr, "Invalid input. Please enter integers.\n");
        return 1;
    }
```

- Если ввод некорректен, выводит сообщение об ошибке и завершает программу.



```
    int matrix[rows][cols];
```

- Объявляет матрицу переменной длины в зависимости от введенных размеров.



```
    printf("Enter the matrix elements:\n");
```

- Запрашивает ввод элементов матрицы.



```
    for (int i = 0; i < rows; i++)
```

- Начинает цикл по строкам матрицы.



```
    {
        for (int j = 0; j < cols; j++)
```

- Начинает цикл по столбцам.



```
        {
            if (scanf("%d", &matrix[i][j]) != 1)
```

- Считывает элемент матрицы, проверяя, был ли ввод корректен.


```
            {
                fprintf(stderr, "Invalid input. Please enter integers.\n");
                return 1;
            }
        }
    }
```

- Если ввод некорректен, выводит сообщение об ошибке и завершает программу.




```
    // Part 1
    printf("Negative elements in rows with zeros:\n");
```

- Выводит заголовок для первой части.



```
    countNegativesInZeroRows(rows, cols, matrix);
```

- Вызывает функцию для подсчета отрицательных элементов в строках, содержащих нули.



```
    // Part 2
    printf("\nSaddle points:\n");
```

- Выводит заголовок для второй части.



```
    findSaddlePoints(rows, cols, matrix);
```

- Вызывает функцию для нахождения седловых точек матрицы.



```
    // Part 3 - Поиск и замена (требуется улучшение для нескольких седловых точек)
    int minSaddleRow = -1, minSaddleCol = -1, minSaddleVal = INT_MAX;
```

- Инициализирует переменные для поиска минимальной седловой точки.


```
    for (int i = 0; i < rows; i++)
```

- Начинает цикл по строкам для нахождения минимальной седловой точки.



```
    {
        for (int j = 0; j < cols; j++)
```

- Начинает цикл по столбцам.



```
        {
            int isMinRow = 1;
            int isMaxCol = 1;
```

- Инициализирует флаги для проверки, является ли элемент седловой точкой.



```
            for (int k = 0; k < cols; k++)
```

- Начинает цикл для проверки, является ли текущий элемент минимальным в строке.



```
            {
                if (matrix[i][k] < matrix[i][j])
                    isMinRow = 0;
            }
```

- Если найден элемент, меньший текущего, устанавливает `isMinRow` в 0.


```
            for (int k = 0; k < rows; k++)
```

- Начинает цикл для проверки, является ли текущий элемент максимальным в столбце.



```
            {
                if (matrix[k][j] > matrix[i][j])
                    isMaxCol = 0;
            }
```

- Если найден элемент, больший текущего, устанавливает `isMaxCol` в 0.


```
            if (isMinRow && isMaxCol && matrix[i][j] < minSaddleVal)
```

- Проверяет, является ли элемент седловой точкой и меньше минимального значения.


```
            {
                minSaddleVal = matrix[i][j];
                minSaddleRow = i;
                minSaddleCol = j;
            }
```

- Если это седловая точка, обновляет минимальное значение и его координаты.



```
        }
    }
```

- Закрывает циклы по строкам и столбцам.



```
    if (minSaddleRow != -1)
```

- Проверяет, была ли найдена хотя бы одна седловая точка.



```
    {
        printf("\nSwapping row and column for minimal saddle point...\n");
        swapRowCol(rows, cols, matrix, minSaddleRow, minSaddleCol);
```

- Если седловая точка найдена, выводит сообщение и вызывает функцию для замены строки и столбца.



```
        printf("Matrix after swap:\n");
```

- Выводит сообщение о том, что следует за ним - матрица после обмена.



```
        for (int i = 0; i < rows; i++)
```

- Начинает цикл для вывода измененной матрицы.



```
        {
            for (int j = 0; j < cols; j++)
```

- Начинает вложенный цикл для вывода столбцов текущей строки.



```
            {
                printf("%d ", matrix[i][j]);
            }
```

- Выводит элемент матрицы.



```
            printf("\n");
        }
```

- Печатает новую строку после каждого ряда элементов.



```
    }
    else
```

- Если седловая точка не найдена, выполняет следующий блок.



```
    {
        printf("\nNo saddle point found.\n");
    }
```

- Выводит сообщение, что седловых точек не найдено.



```
    return 0;
}
```

- Завершает функцию `main`, возвращая 0, что указывает на успешное выполнение программы.